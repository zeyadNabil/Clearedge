<!-- Hero Section -->
<section class="blog-hero-section" style="position: relative; background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); padding-top: 9rem; padding-bottom: 4rem; color: white;">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center fade-in" appScrollAnimation>
        <h1 class="display-3 fw-bold mb-4" style="font-size: 3.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
          Our Blog
        </h1>
        <p class="lead mb-4" style="font-size: 1.25rem; opacity: 0.95;">
          Expert insights, tips, and updates from the cleaning industry
        </p>
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-center" style="background: transparent; margin-bottom: 0; padding: 0;">
            <li class="breadcrumb-item">
              <a routerLink="/" style="color: white; text-decoration: none; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">Home</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page" style="color: rgba(255,255,255,0.9); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">
              Blog
            </li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</section>

<!-- Search and Category Filter Section -->
<section class="category-filter-section" style="background: white; padding: 2rem 0; border-bottom: 1px solid #e0e0e0;">
  <div class="container">
    <div class="row">
      <!-- Search Bar -->
      <div class="col-12 mb-4 fade-in" appScrollAnimation>
        <div class="blog-search-container" style="max-width: 600px; margin: 0 auto;">
          <div class="input-group" style="position: relative;">
            <input 
              type="text" 
              class="form-control blog-search-input" 
              placeholder="Search blogs by title, content, or keywords..."
              [(ngModel)]="searchQuery"
              (input)="onSearchChange()"
              style="padding: 0.75rem 3rem 0.75rem 1.25rem; border-radius: 2rem; border: 2px solid #e0e0e0; font-size: 1rem; transition: all 0.3s ease;">
            <span class="input-group-text blog-search-icon" style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); background: transparent; border: none; padding-right: 1.25rem; z-index: 10; pointer-events: none;">
              <i class="fas fa-search" style="color: var(--text-light);"></i>
            </span>
          </div>
        </div>
      </div>
      <!-- Category Filter Buttons -->
      <div class="col-12 fade-in" appScrollAnimation>
        <div class="d-flex flex-wrap gap-2 justify-content-center align-items-center">
          <button 
            class="btn btn-category"
            [class.active]="selectedCategory === 'All'"
            (click)="filterByCategory('All')"
            style="padding: 0.5rem 1.5rem; border-radius: 2rem; border: 2px solid var(--primary-color); background: white; color: var(--primary-color); font-weight: 600; transition: all 0.3s ease; cursor: pointer;">
            All Posts
          </button>
          @for (category of categories; track category) {
            <button 
              class="btn btn-category"
              [class.active]="selectedCategory === category"
              (click)="filterByCategory(category)"
              style="padding: 0.5rem 1.5rem; border-radius: 2rem; border: 2px solid var(--primary-color); background: white; color: var(--primary-color); font-weight: 600; transition: all 0.3s ease; cursor: pointer;">
              {{ category }}
            </button>
          }
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Blog Posts Grid Section -->
<section class="blog-posts-section section" style="background: linear-gradient(180deg, rgba(70, 171, 131, 0.05) 0%, rgba(38, 103, 167, 0.05) 100%); padding-top: 4rem; padding-bottom: 4rem;">
  <div class="container">
    @if (filteredPosts.length > 0) {
      <div class="row g-4">
        @for (post of filteredPosts; track post.id; let i = $index) {
          <div class="col-md-6 col-lg-4">
            <article class="blog-card fade-in"
                     [class.fade-in-delay-1]="i % 3 === 0"
                     [class.fade-in-delay-2]="i % 3 === 1"
                     [class.fade-in-delay-3]="i % 3 === 2"
                     appScrollAnimation
                     style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s ease; height: 100%; display: flex; flex-direction: column; cursor: pointer;"
                     [routerLink]="['/blog', post.slug]">
              <!-- Blog Image -->
              <div class="blog-card-image" 
                   style="height: 250px; background-image: url('{{ post.imageUrl }}'); background-size: cover; background-position: center; position: relative; overflow: hidden;">
                <div class="blog-card-overlay" 
                     style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(19, 66, 96, 0.2) 0%, rgba(38, 103, 167, 0.2) 100%); transition: opacity 0.3s ease; opacity: 0;"></div>
                <!-- Category Badge -->
                <div style="position: absolute; top: 1rem; left: 1rem; background: var(--accent-color); color: white; padding: 0.375rem 0.875rem; border-radius: 2rem; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">
                  {{ post.category }}
                </div>
              </div>
              
              <!-- Blog Content -->
              <div class="blog-card-content" style="padding: 2rem; flex-grow: 1; display: flex; flex-direction: column;">
                <div class="blog-meta" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; font-size: 0.875rem; color: var(--text-light); flex-wrap: wrap;">
                  <span style="display: flex; align-items: center; gap: 0.375rem;">
                    <i class="fas fa-calendar-alt"></i>
                    {{ formatDate(post.date) }}
                  </span>
                  @if (post.author) {
                    <span style="display: flex; align-items: center; gap: 0.375rem;">
                      <i class="fas fa-user"></i>
                      {{ post.author }}
                    </span>
                  }
                </div>
                
                <h3 class="blog-card-title" style="color: var(--primary-color); font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                  {{ post.title }}
                </h3>
                
                <p class="blog-card-excerpt" style="color: var(--text-light); font-size: 1rem; line-height: 1.6; margin-bottom: 1.5rem; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                  {{ post.excerpt }}
                </p>
                
                <div class="blog-card-footer" style="margin-top: auto;">
                  <span style="color: var(--accent-color); font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; gap: 0.5rem;">
                    Read More
                    <i class="fas fa-arrow-right" style="transition: transform 0.3s ease;"></i>
                  </span>
                </div>
              </div>
            </article>
          </div>
        }
      </div>
    } @else {
      <div class="text-center fade-in" appScrollAnimation style="padding: 4rem 0;">
        <h3 style="color: var(--text-light); font-size: 1.5rem; margin-bottom: 1rem;">
          @if (searchQuery.trim()) {
            No blog posts found matching "{{ searchQuery }}"
          } @else {
            No blog posts found in this category.
          }
        </h3>
        @if (searchQuery.trim() || selectedCategory !== 'All') {
          <button 
            class="btn btn-primary"
            (click)="searchQuery = ''; selectedCategory = 'All'; applyFilters()"
            style="padding: 0.75rem 2rem; border-radius: 0.5rem; margin-top: 1rem;">
            Clear Filters
          </button>
        }
      </div>
    }
  </div>
</section>
